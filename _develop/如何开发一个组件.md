# 组件代码组成

通常来说，一个组件由 模板 、样式、逻辑 三部分组成。由于 tiny-vue 的跨框架特性，导致这些文件散落在不同目录，开发过程中查找文件相较于单文件会有一定的麻烦。这里有一个组件代码查找的技巧：

vscode中可以通过快捷键 ctrl/cmd + p，打开文件检索面板，输入对应条件可以实现快速检索文件
以一个组件为例，通常对应三部分内容：

- 模板检索面板输入： vue {组件名} pc
- 样式
  检索面板输入： theme {组件名}
- 逻辑
  检索面板输入： renderless {组件名} index/vue(index:公共逻辑；vue：vue逻辑   )

# 模板

模板位于 packages/vue 中。参考目前工程的工程结构，通常需要以下文件(以button为例)：

```
.
├── __tests__                  ---测试文件
├── index.ts                   ---组件单包入口文件
├── package.json               ---package.json 
└── src   
    ├── index.ts               ---组件注册入口文件
    ├── mobile-first.vue       ---移动端组件模板
    ├── mobile.vue             ---移动端组件模板
    ├── pc.vue                 ---pc端组件模板
    └── token.ts
```

## package.json

用于组件单包发布。其中 name 定义了单组件包名。version版本号

## index.ts

- 引入组件 src/index.ts
- 添加install组件注册方法
- 添加组件版本
- 导出组件

这里基本可以复制其他组件内容，修改一下组件名即可

## src/index.ts

- 引入组件

  `import template from'virtual-template?pc|mobile|mobile-first'` 。通过该方法引入对应pc或移动端组件模板
- 导出组件 props
- 导出组件

这里需要根据组件修改props。修改导出组件的name

## src/pc.vue

pc端 vue模板代码

其中通过引入组件对应renderless，并通过vue-common的适配层setup，组装返回 setup 需要返回的对象

# 样式

todo

# 逻辑

组件逻辑 位于 packages/renderless。通常一个组件包含 index.ts 和 vue.ts

## index.ts 

存放纯函数，该部分逻辑可以适用于任意框架 vue、react等

## vue.ts 

存放的对应vue模板的逻辑。

需要导出 api 、renderless

 api 是定义了 setup 需要返回的对象属性名集合，会在vue-common适配层的 setup函数中使用到。常用包括 state （模板中使用的响应式数据）

renderless中写法类似于vue3的 setup，可以定义响应式数据、事件、生命周期、监听器等
